<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <title>vINKo System ‚Äî Menos desperdicio. M√°s higiene. M√°s control.</title>
  <meta name="description" content="vINKo System es un concepto en desarrollo rumbo a Kickstarter para mejorar el flujo de trabajo de tinta en tatuaje/PMU: menos desperdicio, m√°s higiene y m√°s control. √önete a la lista de espera o al Founder Council." />

  <link rel="canonical" href="https://vinkosystem.com/" />
  <link rel="alternate" href="https://vinkosystem.com/" hreflang="es" />
  <link rel="alternate" href="https://vinkosystem.com/en.html" hreflang="en" />
  <link rel="alternate" href="https://vinkosystem.com/" hreflang="x-default" />

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="vINKo System" />
  <meta property="og:title" content="vINKo System ‚Äî Menos desperdicio. M√°s higiene. M√°s control." />
  <meta property="og:description" content="Concepto en desarrollo rumbo a Kickstarter. √önete a la lista de espera o al Founder Council (estudios/artistas) para co-dise√±ar el sistema." />
  <meta property="og:url" content="https://vinkosystem.com/" />
  <meta property="og:image" content="https://vinkosystem.com/assets/img/vINKoSystem.png" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="vINKo System ‚Äî Menos desperdicio. M√°s higiene. M√°s control." />
  <meta name="twitter:description" content="Concepto en desarrollo rumbo a Kickstarter. √önete a la lista de espera o al Founder Council." />
  <meta name="twitter:image" content="https://vinkosystem.com/assets/img/vINKoSystem.png" />

  <link rel="stylesheet" href="styles.css?v=1.0.9" />

  <!-- Preloads -->
  <link rel="preload" href="/assets/img/LogoBlanco.png" as="image">
  <link rel="preload" href="/assets/img/vINKoSystem.png" as="image">
  <link rel="preload" href="/assets/img/vk0_concept.png" as="image"> 
  <link rel="preload" href="/assets/video/video_explosion.mp4" as="video/mp4"> 

  <!-- AOS -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />

  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="48x48" href="/assets/img/favicon-48x48.png">
  <link rel="icon" href="/assets/img/favicon.ico" sizes="any">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#0b0f14">

  <!-- Schema -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"vINKo System",
    "url":"https://www.vinkosystem.com/",
    "logo":"https://www.vinkosystem.com/assets/img/favicon-512x512.png",
    "sameAs":[
      "https://www.linkedin.com/company/vinko-system",
      "https://www.instagram.com/vinko.system",
      "https://www.tiktok.com/@vinko.tech"
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebSite",
    "name":"vINKo System",
    "url":"https://www.vinkosystem.com/"
  }
  </script>
</head>

<body>
  <!-- Accesibilidad 
  <a class="skip-link" href="#main">Saltar al contenido</a>-->

  <header class="header">
    <a class="brand" href="#top" aria-label="Ir al inicio">
      <span class="brand-dot"></span>
      <span>vINKo System</span>
    </a>

    <!-- Bot√≥n men√∫ m√≥vil -->
    <button class="nav-toggle" type="button" aria-label="Abrir men√∫" aria-expanded="false" aria-controls="site-nav">
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
    </button>

    <div class="header-right" id="site-nav">
      <nav class="nav" aria-label="Navegaci√≥n principal">
        <a href="#problem">Problema</a>
        <a href="#concept">La idea</a>
        <a href="#benefits">Beneficios</a>
        <a href="#founders">Founder Council</a>
        <a href="#roadmap">Roadmap</a>
        <a href="#faq">FAQ</a>
        <a href="#contact" class="btn primary">Lista de espera</a>
      </nav>

      <!-- Selector de idioma (ES actual) -->
      <div class="lang-switch" aria-label="Idioma del sitio">
        <button class="lang current" type="button" aria-label="Idioma actual: espa√±ol">
          <span class="flag">üá™üá∏</span><span class="code">ES</span>
        </button>
        <a class="lang" href="en.html" aria-label="Cambiar a ingl√©s">
          <span class="flag">üá¨üáß</span><span class="code">EN</span>
        </a>
      </div>
    </div>
  </header>

  <main id="main">
    <!-- HERO -->
    <section id="top" class="vk0-scroll-hero" aria-label="VK0 scroll animation">
      <div class="vk0-sticky">
        <video
          id="vk0-scroll-video"
          class="vk0-scroll-video"
          src="assets/video/video_explosion.mp4"
          preload="auto"
          muted
          playsinline
          webkit-playsinline
          poster="assets/img/vk0_horizontal.png"
        ></video>

        <div class="vk0-shade" aria-hidden="true"></div>

        <div class="vk0-steps" aria-hidden="false">
          <div class="vk0-step" data-start="0.02" data-end="0.22">
            <div class="pill">Concepto patentado internacionalmente en desarrollo</div>
            <h1>VK0</h1>
            <p class="vk0-lead">Menos desperdicio. M√°s higiene. M√°s control.</p>
          </div>

          <div class="vk0-step" data-start="0.26" data-end="0.46">
            <h2>Flujo de tinta m√°s controlado</h2>
            <p>Consistencia operativa sin preparar ‚Äúpor si acaso‚Äù.</p>
          </div>

          <div class="vk0-step" data-start="0.50" data-end="0.72">
            <h2>Rutina m√°s limpia</h2>
            <p>Menos exposici√≥n y menos fricci√≥n en el workflow.</p>
          </div>

          <div class="vk0-step" data-start="0.76" data-end="0.98">
            <h2>¬øQuieres ser de los primeros?</h2>
            <p>Recibe avances y el aviso del Kickstarter antes que nadie.</p>
            <div class="vk0-cta">
              <a class="btn primary" href="#contact">√önete a la lista de espera</a>
              <a class="btn ghost" href="en.html" aria-label="Go to English">EN</a>
            </div>
          </div>
        </div>

        <div class="vk0-scroll-hint" aria-hidden="true">
          <span class="vk0-mouse"></span>
          <span>Scroll</span>
        </div>
      </div>
    </section>

    <!-- PROBLEM -->
    <section id="problem" class="section" data-aos="fade-up">
      <div class="section-head">
        <h2>El problema no es el artista. Es el sistema.</h2>
        <p>
          En estudio, la tinta se prepara con margen ‚Äúpor si acaso‚Äù, se manipula en abierto y se repiten pasos.
          El resultado: <strong>desperdicio y menos control del flujo de trabajo</strong>.
        </p>
      </div>

      <div class="grid-3">
        <div class="card" data-aos="fade-up" data-aos-delay="0">
          <h3>Desperdicio</h3>
          <p>Se prepara m√°s tinta de la que se usa y lo que sobra se tira. Es habitual y nadie lo quiere, pero ocurre.</p>
        </div>
        <div class="card" data-aos="fade-up" data-aos-delay="80">
          <h3>Higiene y Rutina</h3>
          <p>Cuanto m√°s abierto y manual, m√°s puntos de limpieza y m√°s fricci√≥n en el flujo de trabajo.</p>
        </div>
        <div class="card" data-aos="fade-up" data-aos-delay="160">
          <h3>Control</h3>
          <p>La consistencia del suministro y la preparaci√≥n influyen en la experiencia: tanto para artista como para estudio.</p>
        </div>
      </div>
    </section>

    <!-- CONCEPT -->
    <section id="concept" class="section alt" data-aos="fade-right">
      <div class="section">
        <div>
          <div class="pill subtle">La idea</div>
          <h2>Una nueva forma de gestionar la tinta, sin complicarte.</h2>
          <p>
            vINKo System explora un enfoque de <strong>flujo m√°s controlado y operativo</strong>,
            dise√±ado para reducir manipulaci√≥n innecesaria y minimizar el desperdicio.
          </p>

          <div class="grid-2" style="margin-top:18px; gap:12px;">
            <div class="card">
              <h3>Operativa m√°s limpia</h3>
              <p>
                Dise√±ado para disminuir pasos y exposici√≥n innecesaria, ayudando a mantener una rutina de estudio m√°s simple.
              </p>
            </div>
            <div class="card">
              <h3>Control Y Consistencia</h3>
              <p>
                Orientado a una experiencia m√°s consistente de preparaci√≥n y suministro, con menos ‚Äúpor si acaso‚Äù.
              </p>
            </div>
          </div>

          <ul class="ticks">
            <li>Enfoque en flujo de trabajo real de estudio: rapidez, orden y repetibilidad.</li>
            <li>Concepto orientado a fabricaci√≥n profesional.</li>
            <li>Kickstarter como v√≠a para llevarlo a calidad y validaci√≥n apta para estudio.</li>
          </ul>
<!--
          <div class="note">
            * En fase p√∫blica no se comparte ingenier√≠a interna ni detalles sensibles. Se prioriza seguridad e higiene.
          </div>-->
        </div>
      </div>
    </section>

    <!-- BENEFITS -->
    <section id="benefits" class="section" data-aos="fade-left">
      <div class="section-head">
        <h2>Lo que deber√≠a mejorar en tu d√≠a a d√≠a</h2>
        <p>
          Esto es lo que busco conseguir con una versi√≥n final fabricada y validada para estudio.
          Tu feedback ahora ayuda a definir prioridades reales.
        </p>
      </div>

      <div class="grid-3">
        <div class="card" data-aos="fade-up" data-aos-delay="0">
          <h3>Menos tinta tirada</h3>
          <p>Objetivo: reducir significativamente el desperdicio por sesi√≥n sin cambiar tu forma de tatuar.</p>
        </div>
        <div class="card" data-aos="fade-up" data-aos-delay="80">
          <h3>Rutina m√°s simple</h3>
          <p>Menos fricci√≥n: menos pasos, menos elementos, m√°s foco en el trabajo.</p>
        </div>
        <div class="card" data-aos="fade-up" data-aos-delay="160">
          <h3>M√°s control</h3>
          <p>Dise√±ado para aportar consistencia operativa: preparaci√≥n y suministro con intenci√≥n, no improvisaci√≥n.</p>
        </div>
      </div>
    </section>

    <!-- FOUNDERS (replanteado para no prometer uso en estudio) -->
    <section id="founders" class="section alt" data-aos="zoom-in">
      <div class="section-head">
        <div class="pill subtle">Founder Council</div>
        <h2>Estudios y artistas: ayudadme a dise√±arlo bien</h2>
        <p>
          Busco un grupo reducido para <strong>co-dise√±o</strong> (feedback, prioridades, flujo real).
          <strong>No es un programa de ‚Äúprobar en clientes‚Äù</strong>: es una fase de concepto y validaci√≥n de necesidades.
        </p>
      </div>

      <div class="grid-3">
        <div class="card" data-aos="fade-up" data-aos-delay="0">
          <h3>Acceso prioritario</h3>
          <p>Ser√°s de los primeros en recibir avances, decisiones de dise√±o y el aviso de Kickstarter (24-48h antes).</p>
        </div>
        <div class="card" data-aos="fade-up" data-aos-delay="80">
          <h3>Edici√≥n Founder</h3>
          <p>Cuando exista un producto final para producci√≥n, podr√°s optar a packs Founder (limitados y numerados) con condiciones especiales.</p>
        </div>
        <div class="card" data-aos="fade-up" data-aos-delay="160">
          <h3>Tu voz cuenta</h3>
          <p>Votar√°s prioridades (workflow, limpieza, consumibles, ergonom√≠a).</p>
        </div>
      </div>

      <div class="cta-band">
        <div>
          <h3>√önete al Founder Council</h3>
          <p>Si eres estudio/artista, tu experiencia puede definir el producto final.</p>
        </div>
        <a class="btn primary" href="#contact">Quiero entrar</a>
      </div>
    </section>

    <!-- ROADMAP -->
    <section id="roadmap" class="section">
      <div class="section-head">
        <h2>Roadmap</h2>
        <p>De concepto a un producto profesional apto para estudio (fabricaci√≥n + validaci√≥n).</p>
      </div>

      <div class="timeline">
        <div class="step">
          <span class="step-dot"></span>
          <div>
            <h4>Fase actual</h4>
            <p>Concepto, renders/animaciones, entrevistas con estudios y cierre de requisitos reales.</p>
          </div>
        </div>
        <div class="step">
          <span class="step-dot"></span>
          <div>
            <h4>Kickstarter</h4>
            <p>Apoyar el concepto para obtener finaciaci√≥n de una producci√≥n limitada</p>
          </div>
        </div>
        <div class="step">
          <span class="step-dot"></span>
          <div>
            <h4>Dise√±o para fabricaci√≥n (DFM)</h4>
            <p>Materiales, tolerancias, ensamblaje y definici√≥n del sistema para fabricaci√≥n profesional.</p>
          </div>
        </div>
        <div class="step">
          <span class="step-dot"></span>
          <div>
            <h4>Prototipos industriales</h4>
            <p>Iteraciones con procesos adecuados.</p>
          </div>
        </div>
        <div class="step">
          <span class="step-dot"></span>
          <div>
            <h4>Validaci√≥n higiene / seguridad</h4>
            <p>Definici√≥n de procedimientos, pruebas y requisitos para operar en entorno de estudio.</p>
          </div>
        </div>
        <div class="step">
          <span class="step-dot"></span>
          <div>
            <h4>producci√≥n inicial</h4>
            <p>Lanzamiento, fabricaci√≥n del primer lote y prioridad para Founder Council / early adopters.</p>
          </div>
        </div>
      </div>

      <div class="hero-micro" style="margin-top:16px;">
        Las fechas se publicar√°n cuando el roadmap t√©cnico y de fabricaci√≥n est√© cerrado. Ap√∫ntate para recibir la actualizaci√≥n.
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="section alt" data-aos="fade-up">
      <div class="section-head">
        <h2>Preguntas frecuentes</h2>
        <p>Respuestas claras para esta fase (concepto + prelaunch).</p>
      </div>

      <div class="grid-2">
        <div class="card">
          <h3>¬øPuedo comprarlo ya?</h3>
          <p>No todav√≠a. Ahora es fase de concepto y validaci√≥n. El objetivo es lanzar en Kickstarter cuando el dise√±o est√© listo para fabricaci√≥n profesional.</p>
        </div>
        <div class="card">
          <h3>¬øSe puede usar en un estudio hoy?</h3>
          <p>No. Un concepto/prototipo no apto no debe entrar en un entorno higi√©nico real. La prioridad es hacerlo bien: materiales, procesos y validaci√≥n.</p>
        </div>
        <div class="card">
          <h3>¬øQu√© es el Founder Council?</h3>
          <p>Un grupo reducido para co-dise√±ar: feedback, prioridades y workflow. No es ‚Äúprobar con clientes‚Äù.</p>
        </div>
        <div class="card">
          <h3>¬øCu√°ndo sale el Kickstarter?</h3>
          <p>Cuando el roadmap de fabricaci√≥n y validaci√≥n est√© definido. Si te apuntas, te aviso antes que a nadie.</p>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section" data-aos="fade-up">
      <div class="section-head">
        <h2>Sobre m√≠</h2>
        <p>
          Soy <strong>Vicente Pina</strong>. Soy un artista del tatuaje con a√±os de experiencia y aparte soy ingeniero electr√≥nico. 
          En 2023 tuve mi primera idea de concepto de maquina de tatuar integrada e inici√© el proceso para patentarla.
          Ahora con esa patente estoy construyendo vINKo System para resolver un problema que se repite en estudios:
          desperdicio, limpieza y control. Si eres artista o estudio, tu experiencia puede marcar la diferencia.
        </p>
      </div>
    </section>

    <!-- CONTACT / FORM -->
    <section id="contact" class="section alt">
      <div class="section-split">
        <div>
          <div class="pill subtle">Lista de espera</div>
          <h2>Recibe el aviso del Kickstarter y avances antes que nadie</h2>
          <p>
            √önete a la lista para recibir: avances, renders/animaciones, resultados de encuestas y el aviso de lanzamiento.
            Si eres estudio/artista, marca tu rol para optar al <strong>Founder Council</strong>.
          </p>

          <div class="micro">
            <strong>Importante:</strong> este proyecto est√° en fase conceptual. No se comparte ingenier√≠a interna en abierto y no es un producto apto para estudio todav√≠a.
          </div>
        </div>

        <form class="form" id="earlyForm" autocomplete="on">
          <div class="form-fields" id="formFields">
            <label>
              Nombre *
              <input
                type="text"
                name="name"
                placeholder="Tu nombre"
                autocomplete="name"
                required
                minlength="2"
              />
            </label>

            <label>
              Email *
              <input
                type="email"
                name="email"
                placeholder="tu@email.com"
                autocomplete="email"
                required
              />
            </label>

            <label>
              Soy... *
              <select name="role" id="roleSelect" required>
                <option value="">Selecciona</option>
                <option value="Artista">Artista</option>
                <option value="Estudio">Estudio</option>
                <option value="Distribuidor">Distribuidor</option>
                <option value="Otro">Otro</option>
              </select>
            </label>

            <!-- Redes SOLO si es ARTISTA (mantengo tu l√≥gica) -->
            <div id="socialsWrap" class="hidden">
              <label>
                Redes (IG/TikTok/etc.) (opcional)
                <input
                  type="text"
                  name="socials"
                  placeholder="@tuusuario o link"
                  autocomplete="off"
                />
              </label>
            </div>

            <label>
              Pa√≠s (opcional)
              <input
                type="text"
                name="country"
                placeholder="Espa√±a"
                autocomplete="country-name"
              />
            </label>

            <label>
              Tel√©fono (opcional)
              <input
                type="tel"
                name="phone"
                placeholder="+34 6XX XXX XXX"
                autocomplete="tel"
              />
            </label>

            <label>
              Mensaje (opcional)
              <textarea
                name="message"
                rows="4"
                placeholder="¬øEres estudio o artista? ¬øQu√© te gustar√≠a que resolviera este sistema en tu workflow?"
              ></textarea>
            </label>

            <button class="btn primary full" id="submitBtn" type="submit">
              Unirme
            </button>

            <p class="form-note" id="formNote">
              Sin spam. 1-2 emails/mes. Aviso de Kickstarter + avances.
            </p>
          </div>

          <!-- Panel de √©xito -->
          <div class="success-panel hidden" id="successPanel">
            <h3>¬°Hecho!</h3>
            <p>
              Formulario enviado con √©xito. Gracias por apoyar <strong>vINKo System</strong>.
            </p>
          </div>
        </form>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      <div class="brand small">
        <span class="brand-dot"></span><span>vINKo System</span>
      </div>

      <div class="footer-links">
        <a href="#problem">Problema</a>
        <a href="#concept">La idea</a>
        <a href="#benefits">Beneficios</a>
        <a href="#founders">Founder Council</a>
        <a href="#roadmap">Roadmap</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Lista</a>
      </div>

      <div class="footer-right">
        <!-- Redes sociales -->
        <div class="social-links" aria-label="Redes sociales de vINKo System">
          <a href="https://www.linkedin.com/company/vinko-system" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
            <img src="assets/img/linkedin.svg" alt="LinkedIn" class="social-icon" />
          </a>
          <a href="https://www.instagram.com/vinko.system" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
            <img src="assets/img/instagram.svg" alt="Instagram" class="social-icon" />
          </a>
          <a href="https://www.tiktok.com/@vinko.tech" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
            <img src="assets/img/tiktok.svg" alt="TikTok" class="social-icon" />
          </a>
        </div>

        <div class="lang-switch small" aria-label="Idioma del sitio">
          <button class="lang current" type="button" aria-label="Idioma actual: espa√±ol">
            <span class="flag">üá™üá∏</span><span class="code">ES</span>
          </button>
          <a class="lang" href="en.html" aria-label="Cambiar a ingl√©s">
            <span class="flag">üá¨üáß</span><span class="code">EN</span>
          </a>
        </div>

        <div class="footer-meta">
          ¬© <span id="year"></span> vINKo System. Todos los derechos reservados.
        </div>

        <div class="footer-meta" style="margin-top:6px;">
          <a href="/privacy.html">Privacidad</a> ¬∑ <a href="/cookies.html">Cookies</a> ¬∑ <a href="#contact">Contacto</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- AOS JS -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      AOS.init({
        duration: 700,
        easing: "ease-out",
        offset: 80,
        once: true
      });
    });
  </script>

  
  <!-- VK0 Scroll Animation (Apple-like) -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const section = document.querySelector('.vk0-scroll-hero');
      const video = document.getElementById('vk0-scroll-video');

      // Fix 100vh en m√≥vil (barras din√°micas)
      const setVH = () => {
        document.documentElement.style.setProperty('--vh', `${window.innerHeight * 0.01}px`);
      };
      setVH();
      window.addEventListener('resize', setVH);
      if (!section || !video) return;

      // ---- PIN ROBUSTO (tipo Apple) ----
      // En algunos layouts/browsers, 'position: sticky' puede fallar por stacking/overflow.
      // Esto fuerza el "pin" mientras el scroll est√° dentro del tramo del HERO.
      const sticky = section.querySelector('.vk0-sticky');
      const updatePin = () => {
        if (!sticky) return;
        const header = document.querySelector('.header');
        const headerH = header ? header.offsetHeight : 0;

        const start = section.offsetTop - headerH;
        const end = section.offsetTop + section.offsetHeight - window.innerHeight;
        const bottomTop = Math.max(0, section.offsetHeight - window.innerHeight);
        section.style.setProperty('--vk0-bottom-top', `${bottomTop}px`);

        sticky.classList.remove('is-fixed', 'is-bottom');
        const y = window.scrollY || window.pageYOffset || 0;
        if (y >= start && y < end) sticky.classList.add('is-fixed');
        else if (y >= end) sticky.classList.add('is-bottom');
      };

      updatePin();
      window.addEventListener('scroll', updatePin, { passive: true });
      window.addEventListener('resize', updatePin);

      const steps = Array.from(section.querySelectorAll('.vk0-step')).map(el => ({
        el,
        start: parseFloat(el.dataset.start || '0'),
        end: parseFloat(el.dataset.end || '1'),
      }));

      const clamp01 = (x) => Math.min(1, Math.max(0, x));
      const smoothstep = (a, b, x) => {
        const t = clamp01((x - a) / (b - a));
        return t * t * (3 - 2 * t);
      };

      // Opacidad con entrada/salida suave dentro de [start,end]
      const windowFade = (p, start, end, fade = 0.08) => {
        const i = smoothstep(start, start + fade, p);
        const o = 1 - smoothstep(end - fade, end, p);
        return clamp01(i * o);
      };

      let duration = 0;
      let targetTime = 0;
      let smoothTime = 0;
      let lastSet = 0;
      let raf = 0;
      let active = false;

      // Ajustes ‚Äúfeel‚Äù
      const easeVideo = 0.16;     // m√°s bajo = m√°s suave, m√°s alto = m√°s pegado
      const epsilon = 1 / 45;     // no setear currentTime si el cambio es m√≠nimo

      function progressInSection() {
        const rect = section.getBoundingClientRect();
        const scrollable = section.offsetHeight - window.innerHeight;
        if (scrollable <= 0) return 0;
        return clamp01((-rect.top) / scrollable);
      }

      function render() {
        const p = progressInSection();

        // Video: 0 -> duraci√≥n (una sola vez)
        targetTime = p * duration;
        smoothTime += (targetTime - smoothTime) * easeVideo;

        if (Math.abs(smoothTime - lastSet) > epsilon) {
          try { video.currentTime = smoothTime; } catch(e) {}
          lastSet = smoothTime;
        }

        // Steps
        for (const s of steps) {
          const o = windowFade(p, s.start, s.end, 0.10);
          const y = (1 - o) * 18;
          const blur = (1 - o) * 6;
          const scale = 0.98 + (o * 0.02);
          s.el.style.opacity = o.toFixed(3);
          s.el.style.transform = `translateY(${y.toFixed(1)}px) scale(${scale.toFixed(3)})`;
          s.el.style.filter = `blur(${blur.toFixed(2)}px)`;
          s.el.style.pointerEvents = o > 0.6 ? 'auto' : 'none';
        }
      }

      function loop() {
        if (!active) return;
        render();
        raf = requestAnimationFrame(loop);
      }

      const io = new IntersectionObserver((entries) => {
        active = entries.some(e => e.isIntersecting);
        if (active && !raf) {
          raf = requestAnimationFrame(loop);
        }
        if (!active && raf) {
          cancelAnimationFrame(raf);
          raf = 0;
        }
      }, { threshold: 0.01 });

      io.observe(section);

      video.addEventListener('loadedmetadata', async () => {
        duration = video.duration || 0;
        smoothTime = 0;
        lastSet = 0;

        // ‚ÄúWarm-up‚Äù para Safari / iOS (mejora el scrubbing)
        try { await video.play(); video.pause(); } catch(e) {}
        try { video.currentTime = 0; } catch(e) {}

        render();
      });

      window.addEventListener('scroll', () => { if (active) render(); }, { passive: true });
      window.addEventListener('resize', () => { if (active) render(); });
    });
  </script>
<script src="main.js?v=1.0.5" defer></script>
</body>
</html>
